<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Function Expressions</title>
</head>

<body>
  <h2>Function Expression</h2>
  <p>
    Функция в JavaScript – это не магическая языковая структура, а особого типа значение.
    Синтаксис, который мы использовали до этого, называется Function Declaration (Объявление Функции):
    function sayHi() {
    alert( "Привет" );
    }
  </p>

  <h2>Функция – это значение</h2>
  <p>
    Давайте повторим: независимо от того, как создаётся функция – она является значением. В обоих приведённых выше
    примерах функция хранится в переменной sayHi.
    Обратите внимание, что последняя строка не вызывает функцию, потому что после sayHi нет круглых скобок. Существуют
    языки программирования, в которых любое упоминание имени функции приводит к её выполнению, но JavaScript к таким не
    относится.

    В JavaScript функция – это значение, поэтому мы можем обращаться с ней как со значением. Приведённый выше код
    показывает её строковое представление, которое является её исходным кодом.
    Конечно, функция – это особое значение, в том смысле, что мы можем вызвать её как sayHi().
    Но всё же это значение. Поэтому мы можем работать с ней так же, как и с другими видами значений.

    Мы можем скопировать функцию в другую переменную:
    function sayHi() { // (1) создаём
    alert( "Привет" );
    }
    let func = sayHi; // (2) копируем
    func(); // Привет // (3) вызываем копию (работает)!
    sayHi(); // Привет // эта тоже все ещё работает (почему бы и нет)
  </p>

  <h2>Функции-«колбэки»</h2>
  <p>
    На практике подобные функции очень полезны. Основное отличие «реальной» функции ask от примера выше будет в том, что
    она использует более сложные способы взаимодействия с пользователем, чем простой вызов confirm. В браузерах такие
    функции обычно отображают красивые диалоговые окна. Но это уже другая история.

    Аргументы showOk и showCancel функции ask называются функциями-колбэками или просто колбэками.

    Ключевая идея в том, что мы передаём функцию и ожидаем, что она вызовется обратно (от англ. «call back» – обратный
    вызов) когда-нибудь позже, если это будет необходимо. В нашем случае, showOk становится колбэком для ответа «yes», а
    showCancel – для ответа «no».
  </p>
  <script>
    function ask(question, yes, no) {
      if (confirm(question)) yes()
      else no();
    }

    function showOk() {
      alert("Вы согласны.");
    }

    function showCancel() {
      alert("Вы отменили выполнение.");
    }

    // использование: функции showOk, showCancel передаются в качестве аргументов ask
    ask("Вы согласны?", showOk, showCancel);
  </script>
  <script>
    // запись через выражение
    function ask(question, yes, no) {
      if (confirm(question)) yes()
      else no();
    }

    ask(
      "Вы согласны?",
      function () { alert("Вы согласились."); },
      function () { alert("Вы отменили выполнение."); }
    );
  </script>
  <h2> Итого</h2>
  <p>
    Функции – это значения. Они могут быть присвоены, скопированы или объявлены в любом месте кода.
    Если функция объявлена как отдельная инструкция в основном потоке кода, то это “Function Declaration”.
    Если функция была создана как часть выражения, то это “Function Expression”.
    Function Declaration обрабатываются перед выполнением блока кода. Они видны во всём блоке.
    Функции, объявленные при помощи Function Expression, создаются только когда поток выполнения достигает их.

    В большинстве случаев, когда нам нужно объявить функцию, Function Declaration предпочтительнее, т.к функция будет
    видна до своего объявления в коде. Это даёт нам больше гибкости в организации кода, и, как правило, делает его более
    читабельным.

    Исходя из этого, мы должны использовать Function Expression только тогда, когда Function Declaration не подходит для
    нашей задачи. Мы рассмотрели несколько таких примеров в этой главе, и увидим ещё больше в будущем.
  </p>
</body>

</html>