<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DОсновы объектов</title>
</head>

<body>
  <h2>Объекты</h2>
  <p>
    Как мы знаем из главы Типы данных, в JavaScript существует 8 типов данных. Семь из них называются «примитивными»,
    так как содержат только одно значение (будь то строка, число или что-то другое).

    Объекты же используются для хранения коллекций различных значений и более сложных сущностей. В JavaScript объекты
    используются очень часто, это одна из основ языка. Поэтому мы должны понять их, прежде чем углубляться куда-либо
    ещё.

    Объект может быть создан с помощью фигурных скобок {…} с необязательным списком свойств. Свойство – это пара «ключ:
    значение», где ключ – это строка (также называемая «именем свойства»), а значение может быть чем угодно.

    Мы можем представить объект в виде ящика с подписанными папками. Каждый элемент данных хранится в своей папке, на
    которой написан ключ. По ключу папку легко найти, удалить или добавить в неё что-либо.

    Пустой объект («пустой ящик») можно создать, используя один из двух вариантов синтаксиса:
    let user = new Object(); // синтаксис "конструктор объекта"
    let user = {}; // синтаксис "литерал объекта"
  </p>
  <script>
    let user = {     // объект
      name: "John",  // под ключом "name" хранится значение "John"
      age: 30        // под ключом "age" хранится значение 30
    };
  </script>

  <p>
    Для удаления свойства мы можем использовать оператор delete:
    delete user.age;

    Имя свойства может состоять из нескольких слов, но тогда оно должно быть заключено в кавычки:
    let user = {
    name: "John",
    age: 30,
    "likes birds": true // имя свойства из нескольких слов должно быть в кавычках
    };
  </p>

  <h2>Квадратные скобки</h2>
  <p>
    Для свойств, имена которых состоят из нескольких слов, доступ к значению «через точку» не работает:
    // это вызовет синтаксическую ошибку
    user.likes birds = true

    JavaScript видит, что мы обращаемся к свойству user.likes, а затем идёт непонятное слово birds. В итоге
    синтаксическая ошибка.

    Точка требует, чтобы ключ был именован по правилам именования переменных. То есть не имел пробелов, не начинался с
    цифры и не содержал специальные символы, кроме $ и _.

    Для таких случаев существует альтернативный способ доступа к свойствам через квадратные скобки. Такой способ
    сработает с любым именем свойства:

    let user = {};

    // присваивание значения свойству
    user["likes birds"] = true;

    // получение значения свойства
    alert(user["likes birds"]); // true

    // удаление свойства
    delete user["likes birds"];
  </p>

  <h2>Вычисляемые свойства</h2>
  <p>
    Мы можем использовать квадратные скобки в литеральной нотации для создания вычисляемого свойства.

    Пример:
    let fruit = prompt("Какой фрукт купить?", "apple");

    let bag = {
    [fruit]: 5, // имя свойства будет взято из переменной fruit
    };

    alert( bag.apple ); // 5, если fruit="apple"

    Смысл вычисляемого свойства прост: запись [fruit] означает, что имя свойства необходимо взять из переменной fruit.

    И если посетитель введёт слово "apple", то в объекте bag теперь будет лежать свойство {apple: 5}.

    По сути, пример выше работает так же, как и следующий пример:

    let fruit = prompt("Какой фрукт купить?", "apple");
    let bag = {};

    // имя свойства будет взято из переменной fruit
    bag[fruit] = 5;

    Квадратные скобки дают намного больше возможностей, чем запись через точку. Они позволяют использовать любые имена
    свойств и переменные, хотя и требуют более громоздких конструкций кода.

    Подведём итог: в большинстве случаев, когда имена свойств известны и просты, используется запись через точку. Если
    же нам нужно что-то более сложное, то мы используем квадратные скобки.
  </p>

  <h2>Свойство из переменной</h2>

  <p>
    function makeUser(name, age) {
    return {
    name: name,
    age: age
    // ...другие свойства
    };
    }

    let user = makeUser("John", 30);
    alert(user.name); // John

    В примере выше название свойств name и age совпадают с названиями переменных, которые мы подставляем в качестве
    значений этих свойств. Такой подход настолько распространён, что существуют специальные короткие свойства для
    упрощения этой записи.

    Вместо name:name мы можем написать просто name:

    function makeUser(name, age) {
    return {
    name, // то же самое, что и name: name
    age // то же самое, что и age: age
    // ...
    };
    }
  </p>

  <p>
    Также существует специальный оператор "in" для проверки существования свойства в объекте.
    "key" in object
  </p>

  <script>
    let user1 = { name: "John", age: 30 };
    alert("age" in user1); // true, user.age существует
    alert("blabla" in user1); // false, user.blabla не существует
  </script>

  <h2>Цикл "for..in"</h2>

  <p>
    Для перебора всех свойств объекта используется цикл for..in. Этот цикл отличается от изученного ранее цикла for(;;).

    Синтаксис:
  </p>
  <script>
    for (key in object) {
      // тело цикла выполняется для каждого свойства объекта
    }
  </script>
  <script>
    user = {
      name: "John",
      age: 30,
      isAdmin: true
    };

    for (let key in user) {
      // ключи
      alert(key);  // name, age, isAdmin
      // значения ключей
      alert(user[key]); // John, 30, true
    }
  </script>

  <h2>Итого</h2>

  <p>
    Объекты – это ассоциативные массивы с рядом дополнительных возможностей.

    Они хранят свойства (пары ключ-значение), где:

    Ключи свойств должны быть строками или символами (обычно строками).
    Значения могут быть любого типа.

    Чтобы получить доступ к свойству, мы можем использовать:

    Запись через точку: obj.property.
    Квадратные скобки obj["property"]. Квадратные скобки позволяют взять ключ из переменной, например, obj[varWithKey].

    Дополнительные операторы:

    Удаление свойства: delete obj.prop.
    Проверка существования свойства: "key" in obj.
    Перебор свойств объекта: цикл for for (let key in obj).

    То, что мы изучали в этой главе, называется «простым объектом» («plain object») или просто Object.

    В JavaScript есть много других типов объектов:

    Array для хранения упорядоченных коллекций данных,
    Date для хранения информации о дате и времени,
    Error для хранения информации об ошибке.
    … и так далее.

    У них есть свои особенности, которые мы изучим позже. Иногда люди говорят что-то вроде «тип данных Array» или «тип
    данных Date», но формально они не являются отдельными типами, а относятся к типу данных Object. Они лишь расширяют
    его различными способами.

    Объекты в JavaScript очень мощные. Здесь мы только немного углубились в действительно огромную тему. Мы будем плотно
    работать с объектами и узнаем о них больше в следующих частях учебника.
  </p>
</body>

</html>